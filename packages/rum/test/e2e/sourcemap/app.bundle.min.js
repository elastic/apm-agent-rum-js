!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([function(e,t,n){"use strict";function r(){return"withCredentials"in new window.XMLHttpRequest}function o(e){return null!==e&&"object"===(void 0===e?"undefined":a(e))}function i(e){return"function"==typeof e}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=[].slice;e.exports={getViewPortInfo:function(){var e=document.documentElement,t=document.getElementsByTagName("body")[0];return{width:window.innerWidth||e.clientWidth||t.clientWidth,height:window.innerHeight||e.clientHeight||t.clientHeight}},mergeObject:function(e,t){var n,r={};for(n in e)r[n]=e[n];for(n in t)r[n]=t[n];return r},extend:function(e){return this.baseExtend(e,s.call(arguments,1),!1)},merge:function(e){return this.baseExtend(e,s.call(arguments,1),!0)},baseExtend:function e(t,n,r){for(var a=0,s=n.length;a<s;++a){var c=n[a];if(o(c)||i(c))for(var u=Object.keys(c),l=0,f=u.length;l<f;l++){var p=u[l],d=c[p];r&&o(d)?(o(t[p])||(t[p]=Array.isArray(d)?[]:{}),e(t[p],[d],!1)):t[p]=d}}return t},isObject:o,isFunction:i,arrayReduce:function(e,t,n){if(null==e)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var r=Object(e),o=r.length>>>0,i=0;if(!n){for(;i<o&&!(i in r);)i++;if(i>=o)throw new TypeError("Reduce of empty array with no initial value");n=r[i++]}for(;i<o;i++)i in r&&(n=t(n,r[i],i,r));return n},arraySome:function(e,t,n){if(null==e)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof t)throw new TypeError;var r=Object(e),o=r.length>>>0;n||(n=void 0);for(var i=0;i<o;i++)if(i in r&&t.call(n,r[i],i,r))return!0;return!1},arrayMap:function(e,t,n){var r,o,i;if(null==this)throw new TypeError(" this is null or not defined");var a=Object(e),s=a.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(r=n),o=new Array(s),i=0;i<s;){var c,u;i in a&&(c=a[i],u=t.call(r,c,i,a),o[i]=u),i++}return o},arrayIndexOf:function(e,t,n){var r;if(null==e)throw new TypeError('"arrayVal" is null or not defined');var o=Object(e),i=o.length>>>0;if(0===i)return-1;var a=+n||0;if(Math.abs(a)===1/0&&(a=0),a>=i)return-1;for(r=Math.max(a>=0?a:i-Math.abs(a),0);r<i;){if(r in o&&o[r]===t)return r;r++}return-1},functionBind:function(e,t){var n=Array.prototype.slice.call(arguments,2),r=function(){},o=function(){return e.apply(t,n.concat(Array.prototype.slice.call(arguments)))};return r.prototype=e.prototype,o.prototype=new r,o},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},isUndefined:function(e){return void 0===e},isCORSSupported:r,getElasticScript:function(){if("undefined"!=typeof document)for(var e=document.getElementsByTagName("script"),t=0,n=e.length;t<n;t++){var r=e[t];if(r.src.indexOf("elastic")>0)return r}},getCurrentScript:function(){if("undefined"!=typeof document){var e=document.currentScript;return e||this.getElasticScript()}},generateUuid:function(){function e(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return e()+e(!0)+e(!0)+e()},parseUrl:function(e){var t=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/.exec(e),n=t[1]||"",r=t[3]||"",o=t[5]?"#"+t[5]:"",i="";e.indexOf("://")>-1&&(i=e.split("://")[0]+":");for(var a={},s=r.split("&"),c=0,u=s.length;c<u;c++){var l=s[c];if(""!==l&&void 0!==l&&null!==l){var f=s[c].split("=");a[f.shift()]=f.join("=")}}return{protocol:i,path:n,queryString:r,queryStringParsed:a,hash:o}},isPlatformSupported:function(){return"undefined"!=typeof window&&"function"==typeof Array.prototype.forEach&&"function"==typeof JSON.stringify&&"function"==typeof Function.bind&&window.performance&&"function"==typeof window.performance.now&&r()}}},function(e,t,n){"use strict";function r(){this.subscriptions=[]}r.prototype.subscribe=function(e){var t=this;return this.subscriptions.push(e),function(){var n=t.subscriptions.indexOf(e);n>-1&&t.subscriptions.splice(n,1)}},r.prototype.applyAll=function(e,t){this.subscriptions.forEach(function(n){try{n.apply(e,t)}catch(e){console.log(e,e.stack)}},this)},e.exports=r},function(e,t,n){"use strict";function r(e){return"__apm_symbol__"+e}e.exports={apmSymbol:r,patchMethod:function(e,t,n){for(var o=e;o&&!o.hasOwnProperty(t);)o=Object.getPrototypeOf(o);!o&&e[t]&&(o=e);var i,a=r(t);return o&&!(i=o[a])&&(i=o[a]=o[t],o[t]=function(e,t){try{return Function("f","return function "+e+"(){return f(this, arguments)}")(t)}catch(e){return function(){return t(this,arguments)}}}(t,n(i,a,t))),i}}},function(e,t,n){"use strict";var r=n(9),o=n(16),i=n(22),a=n(0);e.exports={createServiceFactory:function(){var e=new i;return e.registerCoreServices(),r.registerServices(e),o.registerServices(e),e},ServiceFactory:i,patchCommon:n(28),utils:a}},function(e,t,n){"use strict";var r=n(11),o=n(12);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[i+s]=a[s];return t||o(a)}},function(e,t,n){"use strict";var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":o(window))&&(r=window)}e.exports=r},function(e,t,n){"use strict";function r(e,t,n){var r=n||{};this.onSpanEnd="function"==typeof r.onSpanEnd?r.onSpanEnd:function(){},this.signature=e,this.type=t,this.ended=!1,this._end=null,this._start=window.performance.now()}var o=n(0);r.prototype.end=function(){this._end=window.performance.now(),this.ended=!0,this.onSpanEnd(this)},r.prototype.duration=function(){if(o.isUndefined(this.ended)||o.isUndefined(this._start))return null;var e=this._end-this._start;return parseFloat(e)},e.exports=r},function(e,t,n){"use strict";var r=n(8)(),o=n(3),i=n(31),a=new i(o.createServiceFactory(),!r);"undefined"!=typeof window&&(window.elasticApm=a);var s={__esModule:!0,default:a.init.bind(a),init:a.init.bind(a),ApmBase:i,apmBase:a};e.exports=s},function(e,t,n){"use strict";var r=!1,o=!1;e.exports=function(){if(r)return o;r=!0;var e=n(3);return e.utils.isPlatformSupported()?(n(30),e.patchCommon(),o=!0):console.log("APM: Platform is not supported!"),o}},function(e,t,n){"use strict";var r=n(10);e.exports={ErrorLogging:r,registerServices:function(e){e.registerServiceCreator("ErrorLogging",function(){var t=e.getService("ApmServer"),n=e.getService("ConfigService");return new r(t,n)})}}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(4),a=n(13),s=n(0),c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._apmServer=t,this._configService=n,this._stackTraceService=new a(n)}return o(e,[{key:"createErrorDataModel",value:function(e){var t,n=this._stackTraceService.cleanFilePath(e.filename),r=this._stackTraceService.filePathToFileName(n),o=this._stackTraceService.createStackTraces(e);if(o=this._stackTraceService.filterInvalidFrames(o),!r&&o.length){var a=o[o.length-1];r=a.filename?a.filename:"(inline script)"}t=this._stackTraceService.isFileInline(n)?"(inline script)":r;var c=e.message||e.error&&e.error.message,u=e.error?e.error.name:void 0;u||(u=c&&c.indexOf(":")>-1?c.split(":")[0]:"");var l,f=this._configService.get("context");e.error&&(l=this._getErrorProperties(e.error));var p=this._getBrowserSpecificMetadata(),d=s.merge({},p,f,l);return{id:i(),timestamp:(new Date).toISOString(),culprit:t,exception:{message:c,stacktrace:o,type:u},context:d}}},{key:"logErrorEvent",value:function(e){if(void 0!==e){var t=this.createErrorDataModel(e);if(void 0!==t.exception.message)return this._apmServer.sendErrors([t])}}},{key:"registerGlobalEventListener",value:function(){var e=this;window.onerror=function(t,n,r,o,i){var a;a=void 0!==t&&"string"!=typeof t?t:{message:t,filename:n,lineno:r,colno:o,error:i},e.logErrorEvent(a)}}},{key:"logError",value:function(e){var t={};return"string"==typeof e?t.message=e:t.error=e,this.logErrorEvent(t)}},{key:"_getErrorProperties",value:function(e){var t={};return Object.keys(e).forEach(function(n){if("stack"!==n){var o=e[n];if(null!==o){switch(void 0===o?"undefined":r(o)){case"function":return;case"object":if("function"!=typeof o.toISOString)return;o=o.toISOString()}t[n]=o}}}),t}},{key:"_getBrowserSpecificMetadata",value:function(){var e=s.getViewPortInfo();return{environment:{browserWidth:e.width,browserHeight:e.height,screenWidth:window.screen.width,screenHeight:window.screen.height,language:navigator.language,userAgent:navigator.userAgent,platform:navigator.platform},page:{referer:document.referrer,host:document.domain,location:window.location.href}}}}]),e}();e.exports=c},function(e,t,n){"use strict";(function(t){var n,r=t.crypto||t.msCrypto;if(r&&r.getRandomValues){var o=new Uint8Array(16);n=function(){return r.getRandomValues(o),o}}if(!n){var i=new Array(16);n=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}e.exports=n}).call(t,n(5))},function(e,t,n){"use strict";for(var r=[],o=0;o<256;++o)r[o]=(o+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,o=r;return o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]}},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(14),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._configService=t}return r(e,[{key:"createStackTraces",value:function(e){var t,n=this,r=e.error;return r&&(t=o.parse(r)),t&&0!==t.length||(t=[{fileName:e.filename,lineNumber:e.lineno,columnNumber:e.colno}]),t=function(e){return e.map(function(e){return e.functionName&&(e.functionName=function(e){var t=e.split("/");return e=t.length>1?["Object",t[t.length-1]].join("."):t[0],e=e.replace(/.<$/gi,".<anonymous>"),e=e.replace(/^Anonymous function$/,"<anonymous>"),e=(t=e.split(".")).length>1?t[t.length-1]:t[0]}(e.functionName)),e})}(t),t=t.map(function(e){if(!e.fileName&&!e.lineNumber)return{};if(!e.columnNumber&&!e.lineNumber)return{};var t=n.cleanFilePath(e.fileName),r=n.filePathToFileName(t);return n.isFileInline(t)&&(r="(inline script)"),{abs_path:e.fileName,filename:r,function:e.functionName||"<anonymous>",lineno:e.lineNumber,colno:e.columnNumber}})}},{key:"filterInvalidFrames",value:function(e){var t=[];return Array.isArray(e)&&(t=e.filter(function(e){return void 0!==e.filename&&void 0!==e.lineno})),t}},{key:"filePathToFileName",value:function(e){var t=window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");return e.indexOf(t)>-1&&(e=e.replace(t+"/","")),e}},{key:"cleanFilePath",value:function(e){return e||(e=""),"<anonymous>"===e&&(e=""),e}},{key:"isFileInline",value:function(e){return!!e&&0===window.location.href.indexOf(e)}}]),e}();e.exports=i},function(e,t,n){"use strict";var r,o,i;"function"==typeof Symbol&&Symbol.iterator;!function(a,s){o=[n(15)],void 0!==(i="function"==typeof(r=s)?r.apply(t,o):r)&&(e.exports=i)}(0,function(e){function t(e,t,n){if("function"==typeof Array.prototype.map)return e.map(t,n);for(var r=new Array(e.length),o=0;o<e.length;o++)r[o]=t.call(n,e[o]);return r}function n(e,t,n){if("function"==typeof Array.prototype.filter)return e.filter(t,n);for(var r=[],o=0;o<e.length;o++)t.call(n,e[o])&&r.push(e[o]);return r}var r=/(^|@)\S+\:\d+/,o=/^\s*at .*(\S+\:\d+|\(native\))/m,i=/^(eval@)?(\[native code\])?$/;return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(o))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(e.replace(/[\(\)]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(r){return t(n(r.stack.split("\n"),function(e){return!!e.match(o)},this),function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),r=this.extractLocation(n.pop()),o=n.join(" ")||void 0,i=function(e,t){if("function"==typeof Array.prototype.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}(["eval","<anonymous>"],r[0])>-1?void 0:r[0];return new e(o,void 0,i,r[1],r[2],t)},this)},parseFFOrSafari:function(r){return t(n(r.stack.split("\n"),function(e){return!e.match(i)},this),function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e(t);var n=t.split("@"),r=this.extractLocation(n.pop()),o=n.join("@")||void 0;return new e(o,void 0,r[0],r[1],r[2],t)},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,r=t.message.split("\n"),o=[],i=2,a=r.length;i<a;i+=2){var s=n.exec(r[i]);s&&o.push(new e(void 0,void 0,s[2],s[1],void 0,r[i]))}return o},parseOpera10:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=t.stacktrace.split("\n"),o=[],i=0,a=r.length;i<a;i+=2){var s=n.exec(r[i]);s&&o.push(new e(s[3]||void 0,void 0,s[2],s[1],void 0,r[i]))}return o},parseOpera11:function(o){return t(n(o.stack.split("\n"),function(e){return!!e.match(r)&&!e.match(/^Error created at/)},this),function(t){var n,r=t.split("@"),o=this.extractLocation(r.pop()),i=r.shift()||"",a=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;i.match(/\(([^\)]*)\)/)&&(n=i.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var s=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new e(a,s,o[0],o[1],o[2],t)},this)}}})},function(e,t,n){"use strict";var r,o,i;"function"==typeof Symbol&&Symbol.iterator;!function(n,a){o=[],void 0!==(i="function"==typeof(r=a)?r.apply(t,o):r)&&(e.exports=i)}(0,function(){function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e,t,n,r,o,i){void 0!==e&&this.setFunctionName(e),void 0!==t&&this.setArgs(t),void 0!==n&&this.setFileName(n),void 0!==r&&this.setLineNumber(r),void 0!==o&&this.setColumnNumber(o),void 0!==i&&this.setSource(i)}return t.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(e){this.functionName=String(e)},getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getFileName:function(){return this.fileName},setFileName:function(e){this.fileName=String(e)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(t){if(!e(t))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(t)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(t){if(!e(t))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(t)},getSource:function(){return this.source},setSource:function(e){this.source=String(e)},toString:function(){return(this.getFunctionName()||"{anonymous}")+("("+(this.getArgs()||[]).join(",")+")")+(this.getFileName()?"@"+this.getFileName():"")+(e(this.getLineNumber())?":"+this.getLineNumber():"")+(e(this.getColumnNumber())?":"+this.getColumnNumber():"")}},t})},function(e,t,n){"use strict";var r=n(17),o=n(18),i=n(21);e.exports={PerformanceMonitoring:r,registerServices:function(e){e.registerServiceCreator("ZoneService",function(){var t=e.getService("ConfigService"),n=e.getService("LoggingService");return new i(n,t)}),e.registerServiceCreator("TransactionService",function(){var t=e.getService("ConfigService"),n=e.getService("LoggingService"),r=e.getService("ZoneService");return new o(r,n,t)}),e.registerServiceCreator("PerformanceMonitoring",function(){var t=e.getService("ConfigService"),n=e.getService("LoggingService"),o=e.getService("ApmServer"),i=e.getService("ZoneService"),a=e.getService("TransactionService");return new r(o,t,n,i,a)})}}},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=function(){function e(t,n,r,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._apmServer=t,this._configService=n,this._logginService=r,this._zoneService=o,this._transactionService=i}return r(e,[{key:"init",value:function(){this._zoneService.initialize(window.Zone.current);var e=this;this._transactionService.subscribe(function(t){var n=e.createTransactionPayload(t);n&&e._apmServer.addTransaction(n)})}},{key:"setTransactionContextInfo",value:function(e){var t=this._configService.get("context");t&&e.addContextInfo(t)}},{key:"filterTransaction",value:function(e){var t=this,n=this._configService.get("browserResponsivenessInterval");if(this._configService.get("checkBrowserResponsiveness")&&!e.isHardNavigation){var r=t._configService.get("browserResponsivenessBuffer"),o=e.duration();if(!t.checkBrowserResponsiveness(e,n,r))return t._logginService.debug("Transaction was discarded! browser was not responsive enough during the transaction."," duration:",o," browserResponsivenessCounter:",e.browserResponsivenessCounter,"interval:",n),!1}return!0}},{key:"prepareTransaction",value:function(e){var t=this;if(e.spans.sort(function(e,t){return e._start-t._start}),t._configService.get("groupSimilarSpans")){var n=t._configService.get("similarSpanThreshold");e.spans=t.groupSmallContinuouslySimilarSpans(e,n)}t.setTransactionContextInfo(e)}},{key:"createTransactionDataModel",value:function(e){var t=this._configService.get("context"),n=e.spans.map(function(e){return{name:e.signature,type:e.type,start:e._start,duration:e.duration()}}),r=o.merge({},t,e.contextInfo);return{id:e.id,timestamp:e.timestamp,name:e.name,type:e.type,duration:e.duration(),spans:n,context:r,marks:e.marks}}},{key:"createTransactionPayload",value:function(e){this.prepareTransaction(e);if(this.filterTransaction(e))return this.createTransactionDataModel(e)}},{key:"sendTransactions",value:function(e){var t=e.map(this.createTransactionPayload.bind(this)).filter(function(e){return e});this._logginService.debug("Sending Transactions to apm server.",e.length);return this._apmServer.sendTransactions(t)}},{key:"convertTransactionsToServerModel",value:function(e){return e.map(this.createTransactionDataModel.bind(this))}},{key:"groupSmallContinuouslySimilarSpans",value:function(e,t){var n=e.duration(),r=[],o=1;return e.spans.forEach(function(i,a){if(0===r.length)r.push(i);else{var s=r[r.length-1],c=s.type===i.type&&s.signature===i.signature&&i.duration()/n<t&&(i._start-s._end)/n<t,u=e.spans.length===a+1;c&&(o++,s._end=i._end),o>1&&(!c||u)&&(s.signature=o+"x "+s.signature,o=1),c||r.push(i)}}),r}},{key:"checkBrowserResponsiveness",value:function(e,t,n){var r=e.browserResponsivenessCounter;if(void 0===t||void 0===r)return!0;var o=e.duration();return r+n>=Math.floor(o/t)}}]),e}();e.exports=i},function(e,t,n){"use strict";function r(e,t,n){this._config=n,void 0===n&&t.debug("TransactionService: config is not provided"),this._logger=t,this._zoneService=e,this.nextAutoTaskId=1,this.taskMap={},this.metrics={},this.initialPageLoadName=void 0,this._subscription=new a;var r=this;this._alreadyCapturedPageLoad=!1,e.spec.onBeforeInvokeTask=function(e){"XMLHttpRequest.send"===e.source&&e.span&&!e.span.ended&&e.span.end(),r.logInTransaction("Executing",e.taskId)};var o=this;e.spec.onScheduleTask=function(e){if("XMLHttpRequest.send"===e.source){var t=e.XHR.url,n=e.XHR.method+" ";r._config.get("includeXHRQueryString")?n+=t:n+=i.parseUrl(t).path;var a=r.startSpan(n,"ext.HttpRequest",{enableStackFrames:!1});e.span=a}else"interaction"===e.type&&"function"==typeof o.interactionStarted&&o.interactionStarted(e);r.addTask(e.taskId)},e.spec.onInvokeTask=function(e){"XMLHttpRequest.send"===e.source&&e.span&&!e.span.ended&&(e.span.end(),r.logInTransaction("xhr late ending"),r.setDebugDataOnTransaction("xhrLateEnding",!0)),r.removeTask(e.taskId),r.detectFinish()},e.spec.onCancelTask=function(e){r.removeTask(e.taskId),r.detectFinish()},e.spec.onInvokeEnd=function(e){t.trace("onInvokeEnd","source:",e.source,"type:",e.type),r.detectFinish()},e.spec.onInvokeStart=function(e){t.trace("onInvokeStart","source:",e.source,"type:",e.type)}}var o=n(19),i=n(0),a=n(1),s=n(20);r.prototype.createTransaction=function(e,t,n){var r=n;if(i.isUndefined(r)&&(r=this._config.config),this._config.isActive()&&this._zoneService.isApmZone()){var a=new o(e,t,r,this._logger);return a.setDebugData("zone",this._zoneService.getCurrentZone().name),this._zoneService.set("transaction",a),r.checkBrowserResponsiveness&&this.startCounter(a),a}},r.prototype.createZoneTransaction=function(){return this.createTransaction("ZoneTransaction","transaction")},r.prototype.getCurrentTransaction=function(){if(this._config.isActive()&&this._zoneService.isApmZone()){var e=this._zoneService.get("transaction");return i.isUndefined(e)||e.ended?this.createZoneTransaction():e}},r.prototype.startCounter=function(e){e.browserResponsivenessCounter=0;var t=this._config.get("browserResponsivenessInterval");void 0!==t?this._zoneService.runOuter(function(){var n=setInterval(function(){e.ended?window.clearInterval(n):e.browserResponsivenessCounter++},t)}):this._logger.debug("browserResponsivenessInterval is undefined!")},r.prototype.sendPageLoadMetrics=function(e){var t,n=this,r=this._config.config;t=this._zoneService.getFromApmZone("transaction");var i=e||this.initialPageLoadName,a=!1;return i||(i="Unknown",a=!0),t&&"ZoneTransaction"===t.name?t.redefine(i,"page-load",r):t=new o(i,"page-load",r,this._logger),t.isHardNavigation=!0,t.unknownName=a,t.doneCallback=function(){n.applyAsync(function(){n.capturePageLoadMetrics(t)&&n.add(t)})},t.detectFinish(),t},r.prototype.capturePageLoadMetrics=function(e){var t=this;if(t._config.get("capturePageLoad")&&!t._alreadyCapturedPageLoad&&e.isHardNavigation)return e.addMarks(t.metrics),s(e),t._alreadyCapturedPageLoad=!0,!0},r.prototype.startTransaction=function(e,t){var n=this,r=this._config.config;if("interaction"!==t||r.captureInteractions){var o=this.getCurrentTransaction();if(o)return"ZoneTransaction"!==o.name?(this.logInTransaction("Ending early to start a new transaction:",e,t),this._logger.debug("Ending old transaction",o),o.end(),o=this.createTransaction(e,t)):o.redefine(e,t,r),this._logger.debug("TransactionService.startTransaction",o),o.doneCallback=function(){n.applyAsync(function(){n._logger.debug("TransactionService transaction finished",o),o.spans.length>0&&!n.shouldIgnoreTransaction(o.name)&&(n.capturePageLoadMetrics(o),n.add(o))})},o}},r.prototype.applyAsync=function(e,t,n){return this._zoneService.runOuter(function(){return Promise.resolve().then(function(){return e.apply(t,n)},function(e){console.log(e)})})},r.prototype.shouldIgnoreTransaction=function(e){for(var t=this._config.get("ignoreTransactions"),n=0;n<t.length;n++){var r=t[n];if("function"==typeof r.test){if(r.test(e))return!0}else if(r===e)return!0}return!1},r.prototype.startSpan=function(e,t,n){var r=this.getCurrentTransaction();if(r){this._logger.debug("TransactionService.startSpan",e,t);return r.startSpan(e,t,n)}},r.prototype.add=function(e){this._config.isActive()&&(this._subscription.applyAll(this,[e]),this._logger.debug("TransactionService.add",e))},r.prototype.subscribe=function(e){return this._subscription.subscribe(e)},r.prototype.addTask=function(e){var t=this.getCurrentTransaction();return t&&(void 0===e&&(e="autoId"+this.nextAutoTaskId++),t.addTask(e),this._logger.debug("TransactionService.addTask",e)),e},r.prototype.removeTask=function(e){var t=this._zoneService.get("transaction");i.isUndefined(t)||t.ended||(t.removeTask(e),this._logger.debug("TransactionService.removeTask",e))},r.prototype.logInTransaction=function(){var e=this._zoneService.get("transaction");i.isUndefined(e)||e.ended||e.debugLog.apply(e,arguments)},r.prototype.setDebugDataOnTransaction=function(e,t){var n=this._zoneService.get("transaction");i.isUndefined(n)||n.ended||n.setDebugData(e,t)},r.prototype.detectFinish=function(){var e=this._zoneService.get("transaction");i.isUndefined(e)||e.ended||(e.detectFinish(),this._logger.debug("TransactionService.detectFinish"))},e.exports=r},function(e,t,n){"use strict";var r=n(6),o=n(0),i=n(4),a=function(e,t,n,o){this.id=i(),this.timestamp=(new Date).toISOString(),this.metadata={},this.name=e,this.type=t,this.ended=!1,this._isDone=!1,this._options=n,this._logger=o,void 0===n&&(this._options={}),this.contextInfo={_debug:{}},this.marks={},this._options.sendVerboseDebugInfo&&(this.contextInfo._debug.log=[],this.debugLog("Transaction",e,t)),this.spans=[],this._activeSpans={},this._scheduledTasks={},this.events={},this.doneCallback=function(){},this._rootSpan=new r("transaction","transaction",{enableStackFrames:!1}),this._startStamp=new Date,this.duration=this._rootSpan.duration.bind(this._rootSpan),this.nextId=0,this.isHardNavigation=!1};a.prototype.debugLog=function(){if(this._options.sendVerboseDebugInfo){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.unshift(Date.now().toString());var t=e.join(" - ");this.contextInfo._debug.log.push(t),this._logger&&this._logger.debug(t)}},a.prototype.addContextInfo=function(e){o.merge(this.contextInfo,e)},a.prototype.setDebugData=function(e,t){this.contextInfo._debug[e]=t},a.prototype.addMarks=function(e){this.marks=o.merge(this.marks,e)},a.prototype.redefine=function(e,t,n){this.debugLog("redefine",e,t),this.name=e,this.type=t,this._options=n},a.prototype.startSpan=function(e,t,n){var o=this;this.debugLog("startSpan",e,t);var i=void 0===n?{}:n;i.enableStackFrames=!0===this._options.enableStackFrames&&!1!==i.enableStackFrames,i.onSpanEnd=function(e){o._onSpanEnd(e)};var a=new r(e,t,i);return a.id=this.nextId,this.nextId++,this._activeSpans[a.id]=a,a},a.prototype.isFinished=function(){var e=Object.keys(this._scheduledTasks);return this.debugLog("isFinished scheduledTasks",e),0===e.length},a.prototype.detectFinish=function(){this.isFinished()&&this.end()},a.prototype.end=function(){this.ended||(this.debugLog("end"),this.ended=!0,this.addContextInfo({url:{location:window.location.href}}),this._rootSpan.end(),!0===this.isFinished()&&this._finish())},a.prototype.addTask=function(e){this.debugLog("addTask",e),this._scheduledTasks[e]=e},a.prototype.removeTask=function(e){this.debugLog("removeTask",e),this.setDebugData("lastRemovedTask",e),delete this._scheduledTasks[e]},a.prototype.addEndedSpans=function(e){this.spans=this.spans.concat(e)},a.prototype._onSpanEnd=function(e){this.spans.push(e),e._scheduledTasks=Object.keys(this._scheduledTasks),delete this._activeSpans[e.id]},a.prototype._finish=function(){!0!==this._alreadFinished&&(this._alreadFinished=!0,this._adjustStartToEarliestSpan(),this._adjustEndToLatestSpan(),this.doneCallback(this))},a.prototype._adjustEndToLatestSpan=function(){var e=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n];r.type&&-1===r.type.indexOf("ext")&&"transaction"!==r.type&&(!t||t._end<r._end)&&(t=r)}return t}(this.spans);if(e){this._rootSpan._end=e._end;for(var t=0;t<this.spans.length;t++){var n=this.spans[t];n._end>this._rootSpan._end&&(n._end=this._rootSpan._end,n.type=n.type+".truncated")}}},a.prototype._adjustStartToEarliestSpan=function(){var e=function(e){var t=null;return e.forEach(function(e){t||(t=e),t&&t._start>e._start&&(t=e)}),t}(this.spans);e&&e._start<this._rootSpan._start&&(this._rootSpan._start=e._start)},e.exports=a},function(e,t,n){"use strict";function r(e,t){var n=t.duration();return n<s&&n>0&&t._start<=e._rootSpan._end&&t._end<=e._rootSpan._end}var o=n(6),i=[["domainLookupStart","domainLookupEnd","DNS lookup"],["connectStart","connectEnd","Connect"],["requestStart","responseStart","Sending and waiting for first byte"],["responseStart","responseEnd","Downloading"],["domLoading","domInteractive","Fetching, parsing and sync. execution"],["domContentLoadedEventStart","domContentLoadedEventEnd",'"DOMContentLoaded" event handling'],["loadEventStart","loadEventEnd",'"load" event handling']],a=["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],s=3e5;e.exports=function(e){if(e.isHardNavigation&&window.performance&&window.performance.timing){var t=window.performance.timing.fetchStart,n=window.performance.timing;e._rootSpan._start=0,e.type="page-load";for(var s=0;s<i.length;s++){var c=n[i[s][0]],u=n[i[s][1]];if(c&&u&&u-c!=0){var l=new o(i[s][2],"hard-navigation.browser-timing");l._start=n[i[s][0]]-t,l.ended=!0,l.end(),l._end=n[i[s][1]]-t,r(e,l)&&e.spans.push(l)}}if(window.performance.getEntriesByType){var f=window.performance.getEntriesByType("resource"),p=e.spans.filter(function(e){return e.type.indexOf("ext.HttpRequest")>-1}).map(function(e){return e.signature.split(" ")[1]});for(s=0;s<f.length;s++){var d=f[s];if(!d.initiatorType||"xmlhttprequest"!==d.initiatorType)if("css"!==d.initiatorType&&"img"!==d.initiatorType&&"script"!==d.initiatorType&&"link"!==d.initiatorType){for(var h=!1,v=0;v<p.length;v++){var g=d.name.lastIndexOf(p[v]);if(g>-1&&g===d.name.length-p[v].length){h=!0;break}}if(h)continue}else{var y="resource";d.initiatorType&&(y+="."+d.initiatorType),(l=new o(d.name,y))._start=d.startTime,l.ended=!0,l.end(),l._end=d.responseEnd,r(e,l)&&e.spans.push(l)}}}e._adjustStartToEarliestSpan(),e._adjustEndToLatestSpan();var m={agent:{timeToComplete:e._rootSpan._end},navigationTiming:{}},b=window.performance.timing.navigationStart;a.forEach(function(e){var t=n[e];t&&(m.navigationTiming[e]=t-b)}),e.addMarks(m)}return 0}},function(e,t,n){"use strict";function r(e,t){function n(){}this.events=new o;var r=0,i=this.spec={onScheduleTask:n,onBeforeInvokeTask:n,onInvokeTask:n,onCancelTask:n,onHandleError:n,onInvokeStart:n,onInvokeEnd:n};this.zoneConfig={name:"apmRootZone",onScheduleTask:function(t,n,o,f){if(e.trace("zoneservice.onScheduleTask",f.source," type:",f.type),"eventTask"===f.type){var p=f.data.taskData.target,d=f.data.taskData.eventName;if(p&&void 0===p[l]&&(p[l]={registeredEventListeners:{}}),"eventTask"===f.type&&"apmImmediatelyFiringEvent"===d)return f.callback(f.data.taskData),f;!p||"readystatechange"!==d&&"load"!==d||(p[l].registeredEventListeners[d]={resolved:!1})}else if("macroTask"===f.type){e.trace("Zone: ",o.name);var h=r++,v={taskId:f.source+h,source:f.source,type:f.type};"setTimeout"===f.source?0!==f.data.args[1]&&void 0!==f.data.args[1]||(f[a]=v,i.onScheduleTask(v)):f.source===u&&(v.XHR={resolved:!1,send:!1,url:f.data.target[s],method:f.data.target[c]},f.data.target.addEventListener("apmImmediatelyFiringEvent",function(e){void 0!==e.target[l]?f.data.target[l]=e.target[l]:f.data.target[l]=e.target[l]={registeredEventListeners:{}}}),f.data.target[l].task=v,f.data.target[l].typeName="XMLHttpRequest",i.onScheduleTask(v))}else"microTask"===f.type&&"Promise.then"===f.source&&(h=r++,v={taskId:f.source+h,source:f.source,type:f.type},f[a]=v,i.onScheduleTask(v));return t.scheduleTask(o,f)},onInvoke:function(e,t,n,o,a,s,c){var u={taskId:c+r++,source:c,type:"invoke"};i.onInvokeStart(u);var l=o.apply(a,s);return i.onInvokeEnd(u),l},onInvokeTask:function(t,n,o,s,c,p){i.onInvokeStart({source:s.source,type:s.type}),e.trace("zoneservice.onInvokeTask",s.source," type:",s.type);var d,h=s.target||s.data&&s.data.target,v=s.eventName;if(h&&"XMLHttpRequest"===h[l].typeName){var g=h[l];e.trace("apmData",g);var y=g.task;y&&"readystatechange"===v&&h.readyState===h.DONE?(g.registeredEventListeners.readystatechange.resolved=!0,i.onBeforeInvokeTask(y)):y&&"load"===v&&"load"in g.registeredEventListeners?g.registeredEventListeners.load.resolved=!0:y&&s.source===u&&(y.XHR.resolved=!0),d=t.invokeTask(o,s,c,p),!y||g.registeredEventListeners.load&&!g.registeredEventListeners.load.resolved||g.registeredEventListeners.readystatechange&&!g.registeredEventListeners.readystatechange.resolved||!y.XHR.resolved||i.onInvokeTask(y)}else if(!s[a]||"setTimeout"!==s.source&&"Promise.then"!==s.source)if("eventTask"===s.type&&h&&v in f){var m=r++;y={taskId:s.source+m,source:s.source,type:"interaction",applyArgs:p},i.onScheduleTask(y),d=t.invokeTask(o,s,c,p),i.onInvokeTask(y)}else d=t.invokeTask(o,s,c,p);else i.onBeforeInvokeTask(s[a]),d=t.invokeTask(o,s,c,p),i.onInvokeTask(s[a]);return i.onInvokeEnd({source:s.source,type:s.type}),d},onCancelTask:function(e,t,n,r){var o;return"macroTask"===r.type&&(r.source===u?(o=r.data.target[l].task,i.onCancelTask(o)):r[a]&&"setTimeout"===r.source&&(o=r[a],i.onCancelTask(o))),e.cancelTask(n,r)}}}var o=n(1),i=n(2),a=i.apmSymbol("taskData"),s=i.apmSymbol("url"),c=i.apmSymbol("method"),u="XMLHttpRequest.send",l=i.apmSymbol("apmData"),f={};["click","contextmenu","dblclick","mousedown","keydown","keypress","keyup"].forEach(function(e){f[e]=1}),r.prototype.initialize=function(e){this.outer=e,this.zone=e.fork(this.zoneConfig)},r.prototype.set=function(e,t){window.Zone.current._properties[e]=t},r.prototype.get=function(e){return window.Zone.current.get(e)},r.prototype.getFromApmZone=function(e){return this.zone.get(e)},r.prototype.setOnApmZone=function(e,t){this.zone._properties[e]=t},r.prototype.getCurrentZone=function(){return window.Zone.current},r.prototype.isApmZone=function(){return this.zone.name===window.Zone.current.name},r.prototype.runOuter=function(e,t,n){return this.outer?this.outer.run(e,t,n):e.apply(t,n)},r.prototype.runInApmZone=function(e,t,n,r){return this.zone.run(e,t,n,r||"runInApmZone:"+e.name)},e.exports=r},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(23),i=n(26),a=n(27),s=n(2),c=n(0),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._serviceCreators={},this._serviceInstances={},this.initialized=!1}return r(e,[{key:"registerCoreServices",value:function(){var e=this;this.registerServiceCreator("ConfigService",function(){return new i}),this.registerServiceInstance("LoggingService",a),this.registerServiceCreator("ApmServer",function(){return new o(e.getService("ConfigService"),e.getService("LoggingService"))}),this.registerServiceInstance("PatchUtils",s),this.registerServiceInstance("Utils",c)}},{key:"init",value:function(){function e(e,t){!0===t.get("debug")&&"trace"!==t.config.logLevel?e.setLevel("debug",!1):e.setLevel(t.get("logLevel"),!1)}if(!this.initialized){this.initialized=!0;var t=this.getService("ConfigService");t.init(),e(a,t),t.subscribeToChange(function(n){e(a,t)});this.getService("ApmServer").init()}}},{key:"registerServiceCreator",value:function(e,t){this._serviceCreators[e]=t}},{key:"registerServiceInstance",value:function(e,t){this._serviceInstances[e]=t}},{key:"getService",value:function(e){if(!this._serviceInstances[e]){if("function"!=typeof this._serviceCreators[e])throw new Error("Can not get service, No creator for: "+e);this._serviceInstances[e]=this._serviceCreators[e](this)}return this._serviceInstances[e]}}]),e}();e.exports=u},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(24),i=n(25),a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._configService=t,this._loggingService=n,this.logMessages={invalidConfig:{message:"Configuration is invalid!",level:"warn"}},this.errorQueue=void 0,this.transactionQueue=void 0,this.initialized=!1,this._throttledMakeRequest}return r(e,[{key:"init",value:function(){this.initialized||(this.initialized=!0,this.initErrorQueue(),this.initTransactionQueue(),this.initThrottledMakeRequest())}},{key:"createServiceObject",value:function(){var e=this._configService;return{name:e.get("serviceName"),version:e.get("serviceVersion"),agent:{name:e.get("agentName"),version:e.get("agentVersion")},language:{name:"javascript"}}}},{key:"initThrottledMakeRequest",value:function(){var e=this,t=e._configService.get("throttlingRequestLimit"),n=e._configService.get("throttlingInterval");this._throttledMakeRequest=i(e._makeHttpRequest.bind(e),function(t,n){e._loggingService.warn("ElasticAPM: Dropped request to "+n+" due to throttling!")},{limit:t,interval:n})}},{key:"_postJson",value:function(e,t){return this._throttledMakeRequest||this.initThrottledMakeRequest(),this._throttledMakeRequest("POST",e,JSON.stringify(t),{"Content-Type":"application/json"})}},{key:"_makeHttpRequest",value:function(e,t,n,r){return new Promise(function(o,i){var a=new window.XMLHttpRequest;if(a.open(e,t,!0),a.timeout=1e4,r)for(var s in r)r.hasOwnProperty(s)&&a.setRequestHeader(s,r[s]);a.onreadystatechange=function(e){if(4===a.readyState){var n=a.status;if(0===n||n>399&&n<600){var r=new Error(t+" HTTP status: "+n);r.xhr=a,i(r)}else o(a.responseText)}},a.onerror=function(e){i(e)},a.send(n)})}},{key:"_createQueue",value:function(e){var t=this._configService.get("queueLimit"),n=this._configService.get("flushInterval");return new o(e,{queueLimit:t,flushInterval:n})}},{key:"initErrorQueue",value:function(){var e=this;this.errorQueue&&this.errorQueue.flush(),this.errorQueue=this._createQueue(function(t){var n=e.sendErrors(t);n&&n.then(void 0,function(t){e._loggingService.debug("Failed sending errors!",t)})})}},{key:"initTransactionQueue",value:function(){var e=this;this.transactionQueue&&this.transactionQueue.flush(),this.transactionQueue=this._createQueue(function(t){var n=e.sendTransactions(t);n&&n.then(void 0,function(t){e._loggingService.debug("Failed sending transactions!",t)})})}},{key:"addError",value:function(e){this.errorQueue||this.initErrorQueue(),this.errorQueue.add(e)}},{key:"addTransaction",value:function(e){this.transactionQueue||this.initTransactionQueue(),this.transactionQueue.add(e)}},{key:"warnOnce",value:function(e){"warn"===e.level?(e.level="debug",this._loggingService.warn(e.message)):this._loggingService.debug(e.message)}},{key:"sendErrors",value:function(e){if(this._configService.isValid()){if(e&&e.length>0){var t={service:this.createServiceObject(),errors:e};t=this._configService.applyFilters(t);var n=this._configService.getEndpointUrl("errors");return this._postJson(n,t)}}else this.warnOnce(this.logMessages.invalidConfig)}},{key:"sendTransactions",value:function(e){if(this._configService.isValid()){if(e&&e.length>0){var t={service:this.createServiceObject(),transactions:e};t=this._configService.applyFilters(t);var n=this._configService.getEndpointUrl("transactions");return this._postJson(n,t)}}else this.warnOnce(this.logMessages.invalidConfig)}}]),e}();e.exports=a},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n||(n={}),this.onFlush=t,this.items=[],this.queueLimit=n.queueLimit||-1,this.flushInterval=n.flushInterval||0,this.timeoutId=void 0}return r(e,[{key:"_setTimer",value:function(){var e=this;this.timeoutId=setTimeout(function(){e.flush()},this.flushInterval)}},{key:"flush",value:function(){this.onFlush(this.items),this._clear()}},{key:"_clear",value:function(){void 0!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0),this.items=[]}},{key:"add",value:function(e){this.items.push(e),-1!==this.queueLimit&&this.items.length>=this.queueLimit?this.flush():void 0===this.timeoutId&&this._setTimer()}}]),e}();e.exports=o},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,o=n.context||this,i=n.limit,a=n.interval,s=n.countFn||function(){},c=0;return function(){var n="function"==typeof s&&s.apply(o,arguments);return"number"!=typeof n&&(n=1),c+=n,void 0===r&&(r=setTimeout(function(){c=0,r=void 0},a)),c>i?"function"==typeof t?t.apply(o,arguments):void 0:e.apply(o,arguments)}}},function(e,t,n){"use strict";function r(){this.config={},this.defaults={serviceName:"",serviceVersion:"",agentName:"js-base",agentVersion:"0.3.0",serverUrl:"http://localhost:8200",serverStringLimit:1024,serverUrlPrefix:"/v1/client-side",active:!0,isInstalled:!1,debug:!1,logLevel:"warn",browserResponsivenessInterval:500,browserResponsivenessBuffer:3,checkBrowserResponsiveness:!0,enable:!0,enableStackFrames:!1,groupSimilarSpans:!0,similarSpanThreshold:.05,captureInteractions:!1,sendVerboseDebugInfo:!1,includeXHRQueryString:!1,capturePageLoad:!0,ignoreTransactions:[],throttlingRequestLimit:20,throttlingInterval:3e4,queueLimit:20,flushInterval:500,hasRouterLibrary:!1,context:{},platform:{}},this._changeSubscription=new a,this.filters=[]}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(0),a=n(1);r.prototype.isActive=function(){return this.get("active")},r.prototype.addFilter=function(e){if("function"!=typeof e)throw new Error("Argument to must be function");this.filters.push(e)},r.prototype.applyFilters=function(e){for(var t=0;t<this.filters.length;t++)if(!(e=this.filters[t](e)))return;return e},r.prototype.init=function(){var e=s();this.setConfig(e)},r.prototype.get=function(e){return i.arrayReduce(e.split("."),function(e,t){return e&&e[t]},this.config)},r.prototype.getEndpointUrl=function(e){return this.get("serverUrl")+this.get("serverUrlPrefix")+"/"+e},r.prototype.set=function(e,t){var n=e.split("."),r=n.length-1,o=this.config;i.arraySome(n,function(e,n){if(void 0===e)return!0;if(n===r)o[e]=t;else{var i=o[e]||{};o[e]=i,o=i}})},r.prototype.setUserContext=function(e){var t={};"number"==typeof e.id?t.id=e.id:"string"==typeof e.id&&(t.id=this.truncateString(e.id)),"string"==typeof e.username&&(t.username=this.truncateString(e.username)),"string"==typeof e.email&&(t.email=this.truncateString(e.email)),this.set("context.user",t)},r.prototype.setCustomContext=function(e){e&&"object"===(void 0===e?"undefined":o(e))&&this.set("context.custom",e)},r.prototype.truncateString=function(e){return String(e).substr(0,this.config.serverStringLimit)},r.prototype.setTag=function(e,t){if(!e)return!1;this.config.context.tags||(this.config.context.tags={});var n=e.replace(/[.*]/g,"_");this.config.context.tags[n]=this.truncateString(t)},r.prototype.getAgentName=function(){var e=this.config.agentVersion;return e||(e="dev"),this.get("agentName")+"/"+e},r.prototype.setConfig=function(e){e=e||{},this.config=i.merge({},this.defaults,this.config,e),this._changeSubscription.applyAll(this,[this.config])},r.prototype.subscribeToChange=function(e){return this._changeSubscription.subscribe(e)},r.prototype.isValid=function(){var e=i.arrayMap(["serviceName","serverUrl"],i.functionBind(function(e){return null===this.config[e]||void 0===this.config[e]||""===this.config[e]},this));return-1===i.arrayIndexOf(e,!0)};var s=function(){return function(e){var t={},n=/^data\-([\w\-]+)$/;if(e)for(var r=e.attributes,o=0;o<r.length;o++){var a=r[o];if(n.test(a.nodeName)){var s=a.nodeName.match(n)[1];t[s=i.arrayMap(s.split("-"),function(e,t){return t>0?e.charAt(0).toUpperCase()+e.substring(1):e}).join("")]=a.value||a.nodeValue}}return t}(i.getCurrentScript())};r.prototype.isPlatformSupported=function(){return"function"==typeof Array.prototype.forEach&&"function"==typeof JSON.stringify&&"function"==typeof Function.bind&&window.performance&&"function"==typeof window.performance.now&&i.isCORSSupported()},e.exports=r},function(e,t,n){"use strict";var r,o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(i,a){void 0!==(o="function"==typeof(r=a)?r.call(t,n,t,e):r)&&(e.exports=o)}(0,function(){function e(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function t(e,t){for(var n=0;n<s.length;n++){var r=s[n];this[r]=n<e?o:this.methodFactory(r,e,t)}}function n(n,r,s){return function(t){return("undefined"==typeof console?"undefined":i(console))!==a&&(void 0!==console[t]?e(console,t):void 0!==console.log?e(console,"log"):o)}(n)||function(e,n,r){return function(){("undefined"==typeof console?"undefined":i(console))!==a&&(t.call(this,n,r),this[e].apply(this,arguments))}}.apply(this,arguments)}function r(e,r,o){function c(){var e;try{e=window.localStorage[f]}catch(e){}if((void 0===e?"undefined":i(e))===a)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(f)+"=");n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(e){}return void 0===l.levels[e]&&(e=void 0),e}var u,l=this,f="loglevel";e&&(f+=":"+e),l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},l.methodFactory=o||n,l.getLevel=function(){return u},l.setLevel=function(n,r){if("string"==typeof n&&void 0!==l.levels[n.toUpperCase()]&&(n=l.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=l.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(u=n,!1!==r&&function(e){var t=(s[e]||"silent").toUpperCase();try{return void(window.localStorage[f]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(f)+"="+t+";"}catch(e){}}(n),t.call(l,n,e),("undefined"==typeof console?"undefined":i(console))===a&&n<l.levels.SILENT)return"No console available for logging"},l.setDefaultLevel=function(e){c()||l.setLevel(e,!1)},l.enableAll=function(e){l.setLevel(l.levels.TRACE,e)},l.disableAll=function(e){l.setLevel(l.levels.SILENT,e)};var p=c();null==p&&(p=null==r?"WARN":r),l.setLevel(p,!1)}var o=function(){},a="undefined",s=["trace","debug","info","warn","error"],c=new r,u={};c.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=u[e];return t||(t=u[e]=new r(e,c.getLevel(),c.methodFactory)),t};var l=("undefined"==typeof window?"undefined":i(window))!==a?window.log:void 0;return c.noConflict=function(){return("undefined"==typeof window?"undefined":i(window))!==a&&window.log===c&&(window.log=l),c},c})},function(e,t,n){"use strict";var r=n(29);e.exports=function(){r()}},function(e,t,n){"use strict";var r=n(2),o=r.apmSymbol("url"),i=r.apmSymbol("method"),a=r.apmSymbol("isAsync");e.exports=function(){r.patchMethod(window.XMLHttpRequest.prototype,"open",function(e){return function(t,n){t[i]=n[0],t[o]=n[1],t[a]=n[2],e.apply(t,n)}})}},function(e,t,n){"use strict";(function(r){var o,i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/**
* @license
* Copyright Google Inc. All Rights Reserved.
*
* Use of this source code is governed by an MIT-style license that can be
* found in the LICENSE file at https://angular.io/license
*/
!function(r,s){"object"===a(t)&&void 0!==e?s():(o=s,void 0!==(i="function"==typeof o?o.call(t,n,t,e):o)&&(e.exports=i))}(0,function(){function e(e,t){for(var n=e.length-1;n>=0;n--)a(e[n])===E&&(e[n]=Zone.current.wrap(e[n],t+"_"+n));return e}function t(t,n,r){return c(t,n,function(t,n,o){return function(n,o){return t&&t.apply(n,e(o,r))}})}function n(e){return!e||!1!==e.writable&&(a(e.get)!==E||a(e.set)!==C)}function o(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t);if(!r&&n){Object.getOwnPropertyDescriptor(n,t)&&(r={enumerable:!0,configurable:!0})}if(r&&r.configurable){delete r.writable,delete r.value;var o=r.get,i=r.set,s=t.substr(2),c=j[s];c||(c=j[s]=w("ON_PROPERTY"+s)),r.set=function(t){var n=this;if(n||e!==T||(n=T),n){n[c]&&n.removeEventListener(s,F),i&&i.apply(n,L),"function"==typeof t?(n[c]=t,n.addEventListener(s,F,!1)):n[c]=null}},r.get=function(){var n=this;if(n||e!==T||(n=T),!n)return null;var i=n[c];if(i)return i;if(o){var s=o&&o.apply(this);if(s)return r.set.apply(this,[s]),a(n[O])===E&&n.removeAttribute(t),s}return null},Object.defineProperty(e,t,r)}}function i(e,t,n){if(t)for(var r=0;r<t.length;r++)o(e,"on"+t[r],n);else{var i=[];for(var a in e)"on"==a.substr(0,2)&&i.push(a);for(var s=0;s<i.length;s++)o(e,i[s],n)}}function s(t){var n=T[t];if(n){T[w(t)]=n,T[t]=function(){var r=e(arguments,t);switch(r.length){case 0:this[Z]=new n;break;case 1:this[Z]=new n(r[0]);break;case 2:this[Z]=new n(r[0],r[1]);break;case 3:this[Z]=new n(r[0],r[1],r[2]);break;case 4:this[Z]=new n(r[0],r[1],r[2],r[3]);break;default:throw new Error("Arg list too long.")}},l(T[t],n);var r,o=new n(function(){});for(r in o)"XMLHttpRequest"===t&&"responseBlob"===r||function(e){"function"==typeof o[e]?T[t].prototype[e]=function(){return this[Z][e].apply(this[Z],arguments)}:Object.defineProperty(T[t].prototype,e,{set:function(n){"function"==typeof n?(this[Z][e]=Zone.current.wrap(n,t+"."+e),l(this[Z][e],n)):this[Z][e]=n},get:function(){return this[Z][e]}})}(r);for(r in n)"prototype"!==r&&n.hasOwnProperty(r)&&(T[t][r]=n[r])}}function c(e,t,r){for(var o=e;o&&!o.hasOwnProperty(t);)o=Object.getPrototypeOf(o);!o&&e[t]&&(o=e);var i,a=w(t);if(o&&!(i=o[a])){i=o[a]=o[t];if(n(o&&Object.getOwnPropertyDescriptor(o,t))){var s=r(i,a,t);o[t]=function(){return s(this,arguments)},l(o[t],i)}}return i}function u(e,t,n){function r(e){var t=e.data;return t.args[t.callbackIndex]=function(){e.invoke.apply(this,arguments)},o.apply(t.target,t.args),e}var o=null;o=c(e,t,function(e){return function(t,o){var i=n(t,o);if(i.callbackIndex>=0&&"function"==typeof o[i.callbackIndex]){return Zone.current.scheduleMacroTask(i.name,o[i.callbackIndex],i,r,null)}return e.apply(t,o)}})}function l(e,t){e[w("OriginalDelegate")]=t}function f(){if(M)return z;M=!0;try{var e=window.navigator.userAgent;e.indexOf("MSIE ");return-1===e.indexOf("MSIE ")&&-1===e.indexOf("Trident/")&&-1===e.indexOf("Edge/")||(z=!0),z}catch(e){}}function p(e,t,n){function r(t,n){if(!t)return!1;var r=!0;n&&void 0!==n.useGlobalCallback&&(r=n.useGlobalCallback);var v=n&&n.validateHandler,m=!0;n&&void 0!==n.checkDuplicate&&(m=n.checkDuplicate);var b=!1;n&&void 0!==n.returnTarget&&(b=n.returnTarget);for(var k=t;k&&!k.hasOwnProperty(o);)k=Object.getPrototypeOf(k);if(!k&&t[o]&&(k=t),!k)return!1;if(k[u])return!1;var _,S={},T=k[u]=k[o],E=k[w(i)]=k[i],C=k[w(s)]=k[s],O=k[w(c)]=k[c];n&&n.prependEventListenerFnName&&(_=k[w(n.prependEventListenerFnName)]=k[n.prependEventListenerFnName]);var L=function(e){return _.apply(S.target,[S.eventName,e.invoke,S.options])},I=r?function(e){if(!S.isExisting)return T.apply(S.target,[S.eventName,S.capture?y:g,S.options])}:function(e){return T.apply(S.target,[S.eventName,e.invoke,S.options])},x=r?function(e){if(!e.isRemoved){var t=H[e.eventName],n=void 0;t&&(n=t[e.capture?N:R]);var r=n&&e.target[n];if(r)for(var o=0;o<r.length;o++)if(r[o]===e){r.splice(o,1),e.isRemoved=!0,0===r.length&&(e.allRemoved=!0,e.target[n]=null);break}}if(e.allRemoved)return E.apply(e.target,[e.eventName,e.capture?y:g,e.options])}:function(e){return E.apply(e.target,[e.eventName,e.invoke,e.options])},P=n&&n.compareTaskCallbackVsDelegate?n.compareTaskCallbackVsDelegate:function(e,t){var n=void 0===t?"undefined":a(t);return n===B&&e.callback===t||n===X&&e.originalDelegate===t},D=Zone[Zone.__symbol__("BLACK_LISTED_EVENTS")],j=function(t,n,o,i,s,c){return void 0===s&&(s=!1),void 0===c&&(c=!1),function(){var u=this||e,l=arguments[1];if(!l)return t.apply(this,arguments);var f=!1;if((void 0===l?"undefined":a(l))!==B){if(!l.handleEvent)return t.apply(this,arguments);f=!0}if(!v||v(t,l,u,arguments)){var p=arguments[0],d=arguments[2];if(D)for(C=0;C<D.length;C++)if(p===D[C])return t.apply(this,arguments);var h,g=!1;void 0===d?h=!1:!0===d?h=!0:!1===d?h=!1:(h=!!d&&!!d.capture,g=!!d&&!!d.once);var y,b=Zone.current,k=H[p];if(k)y=k[h?N:R];else{var _=V+(p+R),w=V+(p+N);H[p]={},H[p][R]=_,H[p][N]=w,y=h?w:_}var T=u[y],E=!1;if(T){if(E=!0,m)for(var C=0;C<T.length;C++)if(P(T[C],l))return}else T=u[y]=[];var O,L=u.constructor[U],I=q[L];I&&(O=I[p]),O||(O=L+n+p),S.options=d,g&&(S.options.once=!1),S.target=u,S.capture=h,S.eventName=p,S.isExisting=E;var x=r?A:null;x&&(x.taskData=S);var j=b.scheduleEventTask(O,l,x,o,i);return S.target=null,x&&(x.taskData=null),g&&(d.once=!0),j.options=d,j.target=u,j.capture=h,j.eventName=p,f&&(j.originalDelegate=l),c?T.unshift(j):T.push(j),s?u:void 0}}};return k[o]=j(T,f,I,x,b),_&&(k[p]=j(_,h,L,x,b,!0)),k[i]=function(){var t,n=this||e,r=arguments[0],o=arguments[2];t=void 0!==o&&(!0===o||!1!==o&&(!!o&&!!o.capture));var i=arguments[1];if(!i)return E.apply(this,arguments);if(!v||v(E,i,n,arguments)){var a,s=H[r];s&&(a=s[t?N:R]);var c=a&&n[a];if(c)for(var u=0;u<c.length;u++){var l=c[u];if(P(l,i))return c.splice(u,1),l.isRemoved=!0,0===c.length&&(l.allRemoved=!0,n[a]=null),void l.zone.cancelTask(l)}return E.apply(this,arguments)}},k[s]=function(){for(var t=[],n=d(this||e,arguments[0]),r=0;r<n.length;r++){var o=n[r],i=o.originalDelegate?o.originalDelegate:o.callback;t.push(i)}return t},k[c]=function(){var t=this||e,n=arguments[0];if(n){var r=H[n];if(r){var o=r[R],a=r[N],s=t[o],u=t[a];if(s)for(var l=s.slice(),f=0;f<l.length;f++){d=(p=l[f]).originalDelegate?p.originalDelegate:p.callback;this[i].apply(this,[n,d,p.options])}if(u)for(var l=u.slice(),f=0;f<l.length;f++){var p=l[f],d=p.originalDelegate?p.originalDelegate:p.callback;this[i].apply(this,[n,d,p.options])}}}else{for(var h=Object.keys(t),f=0;f<h.length;f++){var v=h[f],g=W.exec(v),y=g&&g[1];y&&"removeListener"!==y&&this[c].apply(this,[y])}this[c].apply(this,["removeListener"])}},l(k[o],T),l(k[i],E),O&&l(k[c],O),C&&l(k[s],C),!0}for(var o=n&&n.addEventListenerFnName||"addEventListener",i=n&&n.removeEventListenerFnName||"removeEventListener",s=n&&n.listenersFnName||"eventListeners",c=n&&n.removeAllFnName||"removeAllListeners",u=w(o),f="."+o+":",p="prependListener",h="."+p+":",v=function(e,t,n){if(!e.isRemoved){var r=e.callback;(void 0===r?"undefined":a(r))===X&&r.handleEvent&&(e.callback=function(e){return r.handleEvent(e)},e.originalDelegate=r),e.invoke(e,t,[n]);var o=e.options;if(o&&"object"===(void 0===o?"undefined":a(o))&&o.once){var s=e.originalDelegate?e.originalDelegate:e.callback;t[i].apply(t,[n.type,s,o])}}},g=function(t){if(t=t||e.event){var n=this||t.target||e,r=n[H[t.type][R]];if(r)if(1===r.length)v(r[0],n,t);else for(var o=r.slice(),i=0;i<o.length&&(!t||!0!==t[Q]);i++)v(o[i],n,t)}},y=function(t){if(t=t||e.event){var n=this||t.target||e,r=n[H[t.type][N]];if(r)if(1===r.length)v(r[0],n,t);else for(var o=r.slice(),i=0;i<o.length&&(!t||!0!==t[Q]);i++)v(o[i],n,t)}},m=[],b=0;b<t.length;b++)m[b]=r(t[b],n);return m}function d(e,t){var n=[];for(var r in e){var o=W.exec(r),i=o&&o[1];if(i&&(!t||i===t)){var a=e[r];if(a)for(var s=0;s<a.length;s++)n.push(a[s])}}return n}function h(e,t,n,r){function o(t){var n=t.data;return n.args[0]=function(){try{t.invoke.apply(this,arguments)}finally{if(t.data&&t.data.isPeriodic)return;a(n.handleId)===f?delete l[n.handleId]:n.handleId&&(n.handleId[G]=null)}},n.handleId=s.apply(e,n.args),t}function i(e){return u(e.data.handleId)}var s=null,u=null;n+=r;var l={},f="number";s=c(e,t+=r,function(n){return function(s,c){if("function"===a(c[0])){var u=Zone.current,p={handleId:null,isPeriodic:"Interval"===r,delay:"Timeout"===r||"Interval"===r?c[1]||0:null,args:c},d=u.scheduleMacroTask(t,c[0],p,o,i);if(!d)return d;var h=d.data.handleId;return(void 0===h?"undefined":a(h))===f?l[h]=d:h&&(h[G]=d),h&&h.ref&&h.unref&&"function"===a(h.ref)&&"function"===a(h.unref)&&(d.ref=h.ref.bind(h),d.unref=h.unref.bind(h)),(void 0===h?"undefined":a(h))===f||h?h:d}return n.apply(e,c)}}),u=c(e,n,function(t){return function(n,r){var o,i=r[0];(void 0===i?"undefined":a(i))===f?o=l[i]:(o=i&&i[G])||(o=i),o&&"string"===a(o.type)?"notScheduled"!==o.state&&(o.cancelFn&&o.data.isPeriodic||0===o.runCount)&&((void 0===i?"undefined":a(i))===f?delete l[i]:i&&(i[G]=null),o.zone.cancelTask(o)):t.apply(e,r)}})}function v(e,t){return e&&e[Y]&&e[Y][t]}function g(e,t,n){return Object.isFrozen(n)||(n.configurable=!0),n.configurable||(e[Y]||Object.isFrozen(e)||$(e,Y,{writable:!0,value:{}}),e[Y]&&(e[Y][t]=!0)),n}function y(e,t,n,r){try{return $(e,t,n)}catch(i){if(!n.configurable)throw i;(void 0===r?"undefined":a(r))==ne?delete n.configurable:n.configurable=r;try{return $(e,t,n)}catch(r){var o=null;try{o=JSON.stringify(n)}catch(e){o=n.toString()}console.log("Attempting to configure '"+t+"' with descriptor '"+o+"' on object '"+e+"' and got error, giving up: "+r)}}}function m(e,t,n,r){i(e,function(e,t,n){if(!n)return t;var r=n.filter(function(t){return t.target===e});if(!r||0===r.length)return t;var o=r[0].ignoreProperties;return t.filter(function(e){return-1===o.indexOf(e)})}(e,t,n),r)}function b(e,t){if(!x||D){var n="undefined"!=typeof WebSocket;if(function(){if((P||D)&&!Object.getOwnPropertyDescriptor(HTMLElement.prototype,"onclick")&&"undefined"!=typeof Element){var e=Object.getOwnPropertyDescriptor(Element.prototype,"onclick");if(e&&!e.configurable)return!1}var t=Object.getOwnPropertyDescriptor(XMLHttpRequest.prototype,"onreadystatechange");if(t){Object.defineProperty(XMLHttpRequest.prototype,"onreadystatechange",{enumerable:!0,configurable:!0,get:function(){return!0}});i=!!(r=new XMLHttpRequest).onreadystatechange;return Object.defineProperty(XMLHttpRequest.prototype,"onreadystatechange",t||{}),i}var n=w("fakeonreadystatechange");Object.defineProperty(XMLHttpRequest.prototype,"onreadystatechange",{enumerable:!0,configurable:!0,get:function(){return this[n]},set:function(e){this[n]=e}});var r=new XMLHttpRequest,o=function(){};r.onreadystatechange=o;var i=r[n]===o;return r.onreadystatechange=null,i}()){var r=t.__Zone_ignore_on_properties;if(P){m(window,pe.concat(["messageerror"]),r,Object.getPrototypeOf(window)),m(Document.prototype,pe,r),void 0!==window.SVGElement&&m(window.SVGElement.prototype,pe,r),m(Element.prototype,pe,r),m(HTMLElement.prototype,pe,r),m(HTMLMediaElement.prototype,oe,r),m(HTMLFrameSetElement.prototype,re.concat(ae),r),m(HTMLBodyElement.prototype,re.concat(ae),r),m(HTMLFrameElement.prototype,ie,r),m(HTMLIFrameElement.prototype,ie,r);var o=window.HTMLMarqueeElement;o&&m(o.prototype,se,r);var a=window.Worker;a&&m(a.prototype,fe,r)}m(XMLHttpRequest.prototype,ce,r);var c=t.XMLHttpRequestEventTarget;c&&m(c&&c.prototype,ce,r),"undefined"!=typeof IDBIndex&&(m(IDBIndex.prototype,ue,r),m(IDBRequest.prototype,ue,r),m(IDBOpenDBRequest.prototype,ue,r),m(IDBDatabase.prototype,ue,r),m(IDBTransaction.prototype,ue,r),m(IDBCursor.prototype,ue,r)),n&&m(WebSocket.prototype,le,r)}else!function(){for(var e=function(e){var t=pe[e],n="on"+t;self.addEventListener(t,function(e){var t,r,o=e.target;for(r=o?o.constructor.name+"."+n:"unknown."+n;o;)o[n]&&!o[n][de]&&((t=Zone.current.wrap(o[n],r))[de]=o[n],o[n]=t),o=o.parentElement},!0)},t=0;t<pe.length;t++)e(t)}(),s("XMLHttpRequest"),n&&/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
function(e,t){var n=t.WebSocket;t.EventTarget||p(t,[n.prototype]),t.WebSocket=function(e,t){var r,o,a=arguments.length>1?new n(e,t):new n(e),s=Object.getOwnPropertyDescriptor(a,"onmessage");return s&&!1===s.configurable?(r=Object.create(a),o=a,["addEventListener","removeEventListener","send","close"].forEach(function(e){r[e]=function(){var t=Array.prototype.slice.call(arguments);if("addEventListener"===e||"removeEventListener"===e){var n=t.length>0?t[0]:void 0;if(n){var o=Zone.__symbol__("ON_PROPERTY"+n);a[o]=r[o]}}return a[e].apply(a,t)}})):r=a,i(r,["close","error","message","open"],o),r};var r=t.WebSocket;for(var o in n)r[o]=n[o]}(0,t)}}/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
function k(e,t){var n="Anchor,Area,Audio,BR,Base,BaseFont,Body,Button,Canvas,Content,DList,Directory,Div,Embed,FieldSet,Font,Form,Frame,FrameSet,HR,Head,Heading,Html,IFrame,Image,Input,Keygen,LI,Label,Legend,Link,Map,Marquee,Media,Menu,Meta,Meter,Mod,OList,Object,OptGroup,Option,Output,Paragraph,Pre,Progress,Quote,Script,Select,Source,Span,Style,TableCaption,TableCell,TableCol,Table,TableRow,TableSection,TextArea,Title,Track,UList,Unknown,Video",r="ApplicationCache,EventSource,FileReader,InputMethodContext,MediaController,MessagePort,Node,Performance,SVGElementInstance,SharedWorker,TextTrack,TextTrackCue,TextTrackList,WebKitNamedFlow,Window,Worker,WorkerGlobalScope,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload,IDBRequest,IDBOpenDBRequest,IDBDatabase,IDBTransaction,IDBCursor,DBIndex,WebSocket".split(","),o=[],i=e.wtf,a=n.split(",");i?o=a.map(function(e){return"HTML"+e+"Element"}).concat(r):e.EventTarget?o.push("EventTarget"):o=r;for(var s=e.__Zone_disable_IE_check||!1,c=e.__Zone_enable_cross_context_check||!1,u=f(),l="function __BROWSERTOOLS_CONSOLE_SAFEFUNC() { [native code] }",d=0;d<pe.length;d++){var h=pe[d],v=V+(h+R),g=V+(h+N);H[h]={},H[h][R]=v,H[h][N]=g}for(d=0;d<n.length;d++)for(var y=a[d],m=q[y]={},b=0;b<pe.length;b++){m[h=pe[b]]=y+".addEventListener:"+h}for(var k=[],d=0;d<o.length;d++){var _=e[o[d]];k.push(_&&_.prototype)}return p(e,k,{validateHandler:function(e,t,n,r){if(!s&&u)if(c)try{if("[object FunctionWrapper]"===(o=t.toString())||o==l)return e.apply(n,r),!1}catch(t){return e.apply(n,r),!1}else{var o=t.toString();if("[object FunctionWrapper]"===o||o==l)return e.apply(n,r),!1}else if(c)try{t.toString()}catch(t){return e.apply(n,r),!1}return!0}}),t.patchEventTarget=p,!0}function _(e,t){!function(e,t){var n=e.Event;n&&n.prototype&&t.patchMethod(n.prototype,"stopImmediatePropagation",function(e){return function(t,n){t[Q]=!0,e&&e.apply(t,n)}})}(e,t)}/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
function S(e){if((P||D)&&"registerElement"in e.document){var t=document.registerElement,n=["createdCallback","attachedCallback","detachedCallback","attributeChangedCallback"];document.registerElement=function(e,r){return r&&r.prototype&&n.forEach(function(e){var t="Document.registerElement::"+e;if(r.prototype.hasOwnProperty(e)){var n=Object.getOwnPropertyDescriptor(r.prototype,e);n&&n.value?(n.value=Zone.current.wrap(n.value,t),function(e,t,n){var r=n.configurable;n=g(e,t,n),y(e,t,n,r)}(r.prototype,e,n)):r.prototype[e]=Zone.current.wrap(r.prototype[e],t)}else r.prototype[e]&&(r.prototype[e]=Zone.current.wrap(r.prototype[e],t))}),t.apply(document,[e,r])},l(document.registerElement,t)}}/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
!function(e){function t(e){c&&c.mark&&c.mark(e)}function n(e,t){c&&c.measure&&c.measure(e,t)}function r(t){0===F&&0===y.length&&(l||e[v]&&(l=e[v].resolve(0)),l?l[g](o):e[h](o,0)),t&&y.push(t)}function o(){if(!m){for(m=!0;y.length;){var e=y;y=[];for(var t=0;t<e.length;t++){var n=e[t];try{n.zone.runTask(n,null,null)}catch(e){x.onUnhandledError(e)}}}u[s("ignoreConsoleErrorUncaughtError")];x.microtaskDrainDone(),m=!1}}function i(){}function s(e){return"__zone_symbol__"+e}var c=e.performance;if(t("Zone"),e.Zone)throw new Error("Zone already loaded.");var u=function(){function r(e,t){this._properties=null,this._parent=e,this._name=t?t.name||"unnamed":"<root>",this._properties=t&&t.properties||{},this._zoneDelegate=new p(this,this._parent&&this._parent._zoneDelegate,t)}return r.assertZonePatched=function(){if(e.Promise!==I.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")},Object.defineProperty(r,"root",{get:function(){for(var e=r.current;e.parent;)e=e.parent;return e},enumerable:!0,configurable:!0}),Object.defineProperty(r,"current",{get:function(){return D.zone},enumerable:!0,configurable:!0}),Object.defineProperty(r,"currentTask",{get:function(){return j},enumerable:!0,configurable:!0}),r.__load_patch=function(o,i){if(I.hasOwnProperty(o))throw Error("Already loaded patch: "+o);if(!e["__Zone_disable_"+o]){var a="Zone:"+o;t(a),I[o]=i(e,r,x),n(a,a)}},Object.defineProperty(r.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),r.prototype.get=function(e){var t=this.getZoneWith(e);if(t)return t._properties[e]},r.prototype.getZoneWith=function(e){for(var t=this;t;){if(t._properties.hasOwnProperty(e))return t;t=t._parent}return null},r.prototype.fork=function(e){if(!e)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,e)},r.prototype.wrap=function(e,t){if("function"!==(void 0===e?"undefined":a(e)))throw new Error("Expecting function got: "+e);var n=this._zoneDelegate.intercept(this,e,t),r=this;return function(){return r.runGuarded(n,this,arguments,t)}},r.prototype.run=function(e,t,n,r){void 0===t&&(t=void 0),void 0===n&&(n=null),void 0===r&&(r=null),D={parent:D,zone:this};try{return this._zoneDelegate.invoke(this,e,t,n,r)}finally{D=D.parent}},r.prototype.runGuarded=function(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),D={parent:D,zone:this};try{try{return this._zoneDelegate.invoke(this,e,t,n,r)}catch(e){if(this._zoneDelegate.handleError(this,e))throw e}}finally{D=D.parent}},r.prototype.runTask=function(e,t,n){if(e.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(e.zone||b).name+"; Execution: "+this.name+")");if(!(e.state===k)||e.type!==L){var r=e.state!=w;r&&e._transitionTo(w,S),e.runCount++;var o=j;j=e,D={parent:D,zone:this};try{e.type==O&&e.data&&!e.data.isPeriodic&&(e.cancelFn=null);try{return this._zoneDelegate.invokeTask(this,e,t,n)}catch(e){if(this._zoneDelegate.handleError(this,e))throw e}}finally{e.state!==k&&e.state!==E&&(e.type==L||e.data&&e.data.isPeriodic?r&&e._transitionTo(S,w):(e.runCount=0,this._updateTaskCount(e,-1),r&&e._transitionTo(k,w,k))),D=D.parent,j=o}}},r.prototype.scheduleTask=function(e){if(e.zone&&e.zone!==this)for(var t=this;t;){if(t===e.zone)throw Error("can not reschedule task to "+this.name+" which is descendants of the original zone "+e.zone.name);t=t.parent}e._transitionTo(_,k);var n=[];e._zoneDelegates=n,e._zone=this;try{e=this._zoneDelegate.scheduleTask(this,e)}catch(t){throw e._transitionTo(E,_,k),this._zoneDelegate.handleError(this,t),t}return e._zoneDelegates===n&&this._updateTaskCount(e,1),e.state==_&&e._transitionTo(S,_),e},r.prototype.scheduleMicroTask=function(e,t,n,r){return this.scheduleTask(new d(C,e,t,n,r,null))},r.prototype.scheduleMacroTask=function(e,t,n,r,o){return this.scheduleTask(new d(O,e,t,n,r,o))},r.prototype.scheduleEventTask=function(e,t,n,r,o){return this.scheduleTask(new d(L,e,t,n,r,o))},r.prototype.cancelTask=function(e){if(e.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(e.zone||b).name+"; Execution: "+this.name+")");e._transitionTo(T,S,w);try{this._zoneDelegate.cancelTask(this,e)}catch(t){throw e._transitionTo(E,T),this._zoneDelegate.handleError(this,t),t}return this._updateTaskCount(e,-1),e._transitionTo(k,T),e.runCount=0,e},r.prototype._updateTaskCount=function(e,t){var n=e._zoneDelegates;-1==t&&(e._zoneDelegates=null);for(var r=0;r<n.length;r++)n[r]._updateTaskCount(e.type,t)},r}();u.__symbol__=s;var l,f={name:"",onHasTask:function(e,t,n,r){return e.hasTask(n,r)},onScheduleTask:function(e,t,n,r){return e.scheduleTask(n,r)},onInvokeTask:function(e,t,n,r,o,i){return e.invokeTask(n,r,o,i)},onCancelTask:function(e,t,n,r){return e.cancelTask(n,r)}},p=function(){function e(e,t,n){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=e,this._parentDelegate=t,this._forkZS=n&&(n&&n.onFork?n:t._forkZS),this._forkDlgt=n&&(n.onFork?t:t._forkDlgt),this._forkCurrZone=n&&(n.onFork?this.zone:t.zone),this._interceptZS=n&&(n.onIntercept?n:t._interceptZS),this._interceptDlgt=n&&(n.onIntercept?t:t._interceptDlgt),this._interceptCurrZone=n&&(n.onIntercept?this.zone:t.zone),this._invokeZS=n&&(n.onInvoke?n:t._invokeZS),this._invokeDlgt=n&&(n.onInvoke?t:t._invokeDlgt),this._invokeCurrZone=n&&(n.onInvoke?this.zone:t.zone),this._handleErrorZS=n&&(n.onHandleError?n:t._handleErrorZS),this._handleErrorDlgt=n&&(n.onHandleError?t:t._handleErrorDlgt),this._handleErrorCurrZone=n&&(n.onHandleError?this.zone:t.zone),this._scheduleTaskZS=n&&(n.onScheduleTask?n:t._scheduleTaskZS),this._scheduleTaskDlgt=n&&(n.onScheduleTask?t:t._scheduleTaskDlgt),this._scheduleTaskCurrZone=n&&(n.onScheduleTask?this.zone:t.zone),this._invokeTaskZS=n&&(n.onInvokeTask?n:t._invokeTaskZS),this._invokeTaskDlgt=n&&(n.onInvokeTask?t:t._invokeTaskDlgt),this._invokeTaskCurrZone=n&&(n.onInvokeTask?this.zone:t.zone),this._cancelTaskZS=n&&(n.onCancelTask?n:t._cancelTaskZS),this._cancelTaskDlgt=n&&(n.onCancelTask?t:t._cancelTaskDlgt),this._cancelTaskCurrZone=n&&(n.onCancelTask?this.zone:t.zone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;var r=n&&n.onHasTask,o=t&&t._hasTaskZS;(r||o)&&(this._hasTaskZS=r?n:f,this._hasTaskDlgt=t,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=e,n.onScheduleTask||(this._scheduleTaskZS=f,this._scheduleTaskDlgt=t,this._scheduleTaskCurrZone=this.zone),n.onInvokeTask||(this._invokeTaskZS=f,this._invokeTaskDlgt=t,this._invokeTaskCurrZone=this.zone),n.onCancelTask||(this._cancelTaskZS=f,this._cancelTaskDlgt=t,this._cancelTaskCurrZone=this.zone))}return e.prototype.fork=function(e,t){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,e,t):new u(e,t)},e.prototype.intercept=function(e,t,n){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,e,t,n):t},e.prototype.invoke=function(e,t,n,r,o){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,e,t,n,r,o):t.apply(n,r)},e.prototype.handleError=function(e,t){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,e,t)},e.prototype.scheduleTask=function(e,t){var n=t;if(this._scheduleTaskZS)this._hasTaskZS&&n._zoneDelegates.push(this._hasTaskDlgtOwner),(n=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,e,t))||(n=t);else if(t.scheduleFn)t.scheduleFn(t);else{if(t.type!=C)throw new Error("Task is missing scheduleFn.");r(t)}return n},e.prototype.invokeTask=function(e,t,n,r){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,e,t,n,r):t.callback.apply(n,r)},e.prototype.cancelTask=function(e,t){var n;if(this._cancelTaskZS)n=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,e,t);else{if(!t.cancelFn)throw Error("Task is not cancelable");n=t.cancelFn(t)}return n},e.prototype.hasTask=function(e,t){try{return this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,e,t)}catch(t){this.handleError(e,t)}},e.prototype._updateTaskCount=function(e,t){var n=this._taskCounts,r=n[e],o=n[e]=r+t;if(!(o<0||0!=r&&0!=o)){var i={microTask:n.microTask>0,macroTask:n.macroTask>0,eventTask:n.eventTask>0,change:e};this.hasTask(this.zone,i)}},e}(),d=function(){function t(n,r,o,i,a,s){this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=n,this.source=r,this.data=i,this.scheduleFn=a,this.cancelFn=s,this.callback=o;var c=this;n===L&&i&&i.isUsingGlobalCallback?this.invoke=t.invokeTask:this.invoke=function(){return t.invokeTask.apply(e,[c,this,arguments])}}return t.invokeTask=function(e,t,n){e||(e=this),F++;try{return e.runCount++,e.zone.runTask(e,t,n)}finally{1==F&&o(),F--}},Object.defineProperty(t.prototype,"zone",{get:function(){return this._zone},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),t.prototype.cancelScheduleRequest=function(){this._transitionTo(k,_)},t.prototype._transitionTo=function(e,t,n){if(this._state!==t&&this._state!==n)throw new Error(this.type+" '"+this.source+"': can not transition to '"+e+"', expecting state '"+t+"'"+(n?" or '"+n+"'":"")+", was '"+this._state+"'.");this._state=e,e==k&&(this._zoneDelegates=null)},t.prototype.toString=function(){return this.data&&void 0!==this.data.handleId?this.data.handleId:Object.prototype.toString.call(this)},t.prototype.toJSON=function(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}},t}(),h=s("setTimeout"),v=s("Promise"),g=s("then"),y=[],m=!1,b={name:"NO ZONE"},k="notScheduled",_="scheduling",S="scheduled",w="running",T="canceling",E="unknown",C="microTask",O="macroTask",L="eventTask",I={},x={symbol:s,currentZoneFrame:function(){return D},onUnhandledError:i,microtaskDrainDone:i,scheduleMicroTask:r,showUncaughtError:function(){return!u[s("ignoreConsoleErrorUncaughtError")]},patchEventTarget:function(){return[]},patchOnProperties:i,patchMethod:function(){return i},patchArguments:function(){return i},setNativePromise:function(e){e&&"function"===a(e.resolve)&&(l=e.resolve(0))}},P=new u(null,null);e.__rootZoneSpec__&&(P=P.fork(e.__rootZoneSpec__),delete e.__rootZoneSpec__);var D={parent:null,zone:P},j=null,F=0;n("Zone","Zone"),e.Zone=u}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||r);/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
Zone.__load_patch("ZoneAwarePromise",function(e,t,n){function r(e){return e&&e.then}function o(e,t){return function(n){try{i(e,t,n)}catch(t){i(e,!1,t)}}}function i(e,r,u){var l=w();if(e===u)throw new TypeError(T);if(e[g]===b){var p=null;try{(void 0===u?"undefined":a(u))!==E&&(void 0===u?"undefined":a(u))!==C||(p=u&&u.then)}catch(t){return l(function(){i(e,!1,t)})(),e}if(r!==_&&u instanceof I&&u.hasOwnProperty(g)&&u.hasOwnProperty(y)&&u[g]!==b)s(u),i(e,u[g],u[y]);else if(r!==_&&(void 0===p?"undefined":a(p))===C)try{p.apply(u,[l(o(e,r)),l(o(e,!1))])}catch(t){l(function(){i(e,!1,t)})()}else{e[g]=r;var d=e[y];if(e[y]=u,r===_&&u instanceof Error){var v=t.currentTask&&t.currentTask.data&&t.currentTask.data[h];v&&Object.defineProperty(u,O,{configurable:!0,enumerable:!1,writable:!0,value:v})}for(var m=0;m<d.length;)c(e,d[m++],d[m++],d[m++],d[m++]);if(0==d.length&&r==_){e[g]=S;try{throw new Error("Uncaught (in promise): "+function(e){if(e&&e.toString===Object.prototype.toString){var t=e.constructor&&e.constructor.name;return(t||"")+": "+JSON.stringify(e)}return e?e.toString():Object.prototype.toString.call(e)}(u)+(u&&u.stack?"\n"+u.stack:""))}catch(r){var k=r;k.rejection=u,k.promise=e,k.zone=t.current,k.task=t.currentTask,f.push(k),n.scheduleMicroTask()}}}}return e}function s(e){if(e[g]===S){try{var n=t[L];n&&(void 0===n?"undefined":a(n))===C&&n.apply(this,[{rejection:e[y],promise:e}])}catch(e){}e[g]=_;for(var r=0;r<f.length;r++)e===f[r].promise&&f.splice(r,1)}}function c(e,t,n,r,o){s(e);var c=e[g]?(void 0===r?"undefined":a(r))===C?r:function(e){return e}:(void 0===o?"undefined":a(o))===C?o:function(e){return I.reject(e)};t.scheduleMicroTask(m,function(){try{i(n,!0,t.run(c,void 0,[e[y]]))}catch(e){i(n,!1,e)}})}function u(e){var t=e.prototype,n=t.then;t[d]=n;var r=Object.getOwnPropertyDescriptor(e.prototype,"then");r&&!1===r.writable&&r.configurable&&Object.defineProperty(e.prototype,"then",{writable:!0}),e.prototype.then=function(e,t){var r=this;return new I(function(e,t){n.call(r,e,t)}).then(e,t)},e[j]=!0}var l=n.symbol,f=[],p=l("Promise"),d=l("then"),h="__creationTrace__";n.onUnhandledError=function(e){if(n.showUncaughtError()){var t=e&&e.rejection;t?console.error("Unhandled Promise rejection:",t instanceof Error?t.message:t,"; Zone:",e.zone.name,"; Task:",e.task&&e.task.source,"; Value:",t,t instanceof Error?t.stack:void 0):console.error(e)}},n.microtaskDrainDone=function(){for(;f.length;)for(var e=function(){var e=f.shift();try{e.zone.runGuarded(function(){throw e})}catch(e){!function(e){n.onUnhandledError(e);try{var r=t[v];r&&"function"==typeof r&&r.apply(this,[e])}catch(e){}}(e)}};f.length;)e()};var v=l("unhandledPromiseRejectionHandler"),g=l("state"),y=l("value"),m="Promise.then",b=null,k=!0,_=!1,S=0,w=function(){var e=!1;return function(t){return function(){e||(e=!0,t.apply(null,arguments))}}},T="Promise resolved with itself",E="object",C="function",O=l("currentTaskTrace"),L=l("rejectionHandledHandler"),I=function(){function e(t){var n=this;if(!(n instanceof e))throw new Error("Must be an instanceof Promise.");n[g]=b,n[y]=[];try{t&&t(o(n,k),o(n,_))}catch(e){i(n,!1,e)}}return e.toString=function(){return"function ZoneAwarePromise() { [native code] }"},e.resolve=function(e){return i(new this(null),k,e)},e.reject=function(e){return i(new this(null),_,e)},e.race=function(e){function t(e){a&&(a=o(e))}function n(e){a&&(a=i(e))}for(var o,i,a=new this(function(e,t){o=e,i=t}),s=0,c=e;s<c.length;s++){var u=c[s];r(u)||(u=this.resolve(u)),u.then(t,n)}return a},e.all=function(e){for(var t,n,o=new this(function(e,r){t=e,n=r}),i=0,a=[],s=0,c=e;s<c.length;s++){var u=c[s];r(u)||(u=this.resolve(u)),u.then(function(e){return function(n){a[e]=n,--i||t(a)}}(i),n),i++}return i||t(a),o},e.prototype.then=function(e,n){var r=new this.constructor(null),o=t.current;return this[g]==b?this[y].push(o,r,e,n):c(this,o,r,e,n),r},e.prototype.catch=function(e){return this.then(null,e)},e}();I.resolve=I.resolve,I.reject=I.reject,I.race=I.race,I.all=I.all;var x=e[p]=e.Promise,P=t.__symbol__("ZoneAwarePromise"),D=Object.getOwnPropertyDescriptor(e,"Promise");D&&!D.configurable||(D&&delete D.writable,D&&delete D.value,D||(D={configurable:!0,enumerable:!0}),D.get=function(){return e[P]?e[P]:e[p]},D.set=function(t){t===I?e[P]=t:(e[p]=t,t.prototype[d]||u(t),n.setNativePromise(t))},Object.defineProperty(e,"Promise",D)),e.Promise=I;var j=l("thenPatched");if(x){u(x);var F=e.fetch;(void 0===F?"undefined":a(F))==C&&(e.fetch=function(e){return function(){var t=e.apply(this,arguments);if(t instanceof I)return t;var n=t.constructor;return n[j]||u(n),t}}(F))}return Promise[t.__symbol__("uncaughtPromiseErrors")]=f,I});/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var w=Zone.__symbol__,T="object"===("undefined"==typeof window?"undefined":a(window))&&window||"object"===("undefined"==typeof self?"undefined":a(self))&&self||r,E="function",C="undefined",O="removeAttribute",L=[null],I="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,x=!("nw"in T)&&void 0!==T.process&&"[object process]"==={}.toString.call(T.process),P=!x&&!I&&!("undefined"==typeof window||!window.HTMLElement),D=void 0!==T.process&&"[object process]"==={}.toString.call(T.process)&&!I&&!("undefined"==typeof window||!window.HTMLElement),j={},F=function(e){if(e=e||T.event){var t=j[e.type];t||(t=j[e.type]=w("ON_PROPERTY"+e.type));var n=(this||e.target||T)[t],r=n&&n.apply(this,arguments);return void 0==r||r||e.preventDefault(),r}},Z=w("originalInstance"),M=!1,z=!1;/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
Zone.__load_patch("toString",function(e,t,n){var r=t.__zone_symbol__originalToString=Function.prototype.toString,o=w("OriginalDelegate"),i=w("Promise"),s=w("Error");Function.prototype.toString=function(){if("function"===a(this)){var t=this[o];if(t)return"function"===(void 0===t?"undefined":a(t))?r.apply(this[o],arguments):Object.prototype.toString.call(t);if(this===Promise){var n=e[i];if(n)return r.apply(n,arguments)}if(this===Error){var c=e[s];if(c)return r.apply(c,arguments)}}return r.apply(this,arguments)};var c=Object.prototype.toString;Object.prototype.toString=function(){return this instanceof Promise?"[object Promise]":c.apply(this,arguments)}});/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var N="true",R="false",A={isUsingGlobalCallback:!0},H={},q={},U="name",B="function",X="object",V="__zone_symbol__",W=/^__zone_symbol__(\w+)(true|false)$/,Q="__zone_symbol__propagationStopped",G=w("zoneTask"),$=Object[w("defineProperty")]=Object.defineProperty,J=Object[w("getOwnPropertyDescriptor")]=Object.getOwnPropertyDescriptor,K=Object.create,Y=w("unconfigurables"),ee="prototype",te="object",ne="undefined",re=["absolutedeviceorientation","afterinput","afterprint","appinstalled","beforeinstallprompt","beforeprint","beforeunload","devicelight","devicemotion","deviceorientation","deviceorientationabsolute","deviceproximity","hashchange","languagechange","message","mozbeforepaint","offline","online","paint","pageshow","pagehide","popstate","rejectionhandled","storage","unhandledrejection","unload","userproximity","vrdisplyconnected","vrdisplaydisconnected","vrdisplaypresentchange"],oe=["encrypted","waitingforkey","msneedkey","mozinterruptbegin","mozinterruptend"],ie=["load"],ae=["blur","error","focus","load","resize","scroll","messageerror"],se=["bounce","finish","start"],ce=["loadstart","progress","abort","error","load","progress","timeout","loadend","readystatechange"],ue=["upgradeneeded","complete","abort","success","error","blocked","versionchange","close"],le=["close","error","open","message"],fe=["error","message"],pe=["abort","animationcancel","animationend","animationiteration","auxclick","beforeinput","blur","cancel","canplay","canplaythrough","change","compositionstart","compositionupdate","compositionend","cuechange","click","close","contextmenu","curechange","dblclick","drag","dragend","dragenter","dragexit","dragleave","dragover","drop","durationchange","emptied","ended","error","focus","focusin","focusout","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadstart","loadeddata","loadedmetadata","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","orientationchange","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointerlockchange","mozpointerlockchange","webkitpointerlockerchange","pointerlockerror","mozpointerlockerror","webkitpointerlockerror","pointermove","pointout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","seeked","seeking","select","selectionchange","selectstart","show","sort","stalled","submit","suspend","timeupdate","volumechange","touchcancel","touchmove","touchstart","touchend","transitioncancel","transitionend","waiting","wheel"].concat(["webglcontextrestored","webglcontextlost","webglcontextcreationerror"],["autocomplete","autocompleteerror"],["toggle"],["afterscriptexecute","beforescriptexecute","DOMContentLoaded","fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange","fullscreenerror","mozfullscreenerror","webkitfullscreenerror","msfullscreenerror","readystatechange","visibilitychange"],re,["beforecopy","beforecut","beforepaste","copy","cut","paste","dragstart","loadend","animationstart","search","transitionrun","transitionstart","webkitanimationend","webkitanimationiteration","webkitanimationstart","webkittransitionend"],["activate","afterupdate","ariarequest","beforeactivate","beforedeactivate","beforeeditfocus","beforeupdate","cellchange","controlselect","dataavailable","datasetchanged","datasetcomplete","errorupdate","filterchange","layoutcomplete","losecapture","move","moveend","movestart","propertychange","resizeend","resizestart","rowenter","rowexit","rowsdelete","rowsinserted","command","compassneedscalibration","deactivate","help","mscontentzoom","msmanipulationstatechanged","msgesturechange","msgesturedoubletap","msgestureend","msgesturehold","msgesturestart","msgesturetap","msgotpointercapture","msinertiastart","mslostpointercapture","mspointercancel","mspointerdown","mspointerenter","mspointerhover","mspointerleave","mspointermove","mspointerout","mspointerover","mspointerup","pointerout","mssitemodejumplistitemremoved","msthumbnailclick","stop","storagecommit"]),de=w("unbound");/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
Zone.__load_patch("util",function(e,n,r){r.patchOnProperties=i,r.patchMethod=c,r.patchArguments=t}),Zone.__load_patch("timers",function(e,t,n){h(e,"set","clear","Timeout"),h(e,"set","clear","Interval"),h(e,"set","clear","Immediate")}),Zone.__load_patch("requestAnimationFrame",function(e,t,n){h(e,"request","cancel","AnimationFrame"),h(e,"mozRequest","mozCancel","AnimationFrame"),h(e,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",function(e,t,n){for(var r=["alert","prompt","confirm"],o=0;o<r.length;o++){c(e,r[o],function(n,r,o){return function(r,i){return t.current.run(n,e,i,o)}})}}),Zone.__load_patch("EventTarget",function(e,t,n){var r=t.__symbol__("BLACK_LISTED_EVENTS");e[r]&&(t[r]=e[r]),_(e,n),k(e,n);var o=e.XMLHttpRequestEventTarget;o&&o.prototype&&n.patchEventTarget(e,[o.prototype]),s("MutationObserver"),s("WebKitMutationObserver"),s("IntersectionObserver"),s("FileReader")}),Zone.__load_patch("on_property",function(e,t,n){b(0,e),Object.defineProperty=function(e,t,n){if(v(e,t))throw new TypeError("Cannot assign to read only property '"+t+"' of "+e);var r=n.configurable;return t!==ee&&(n=g(e,t,n)),y(e,t,n,r)},Object.defineProperties=function(e,t){return Object.keys(t).forEach(function(n){Object.defineProperty(e,n,t[n])}),e},Object.create=function(e,t){return(void 0===t?"undefined":a(t))!==te||Object.isFrozen(t)||Object.keys(t).forEach(function(n){t[n]=g(e,n,t[n])}),K(e,t)},Object.getOwnPropertyDescriptor=function(e,t){var n=J(e,t);return v(e,t)&&(n.configurable=!1),n},S(e)}),Zone.__load_patch("canvas",function(e,t,n){var r=e.HTMLCanvasElement;void 0!==r&&r.prototype&&r.prototype.toBlob&&u(r.prototype,"toBlob",function(e,t){return{name:"HTMLCanvasElement.toBlob",target:e,callbackIndex:0,args:t}})}),Zone.__load_patch("XHR",function(e,t,n){!function(e){function n(e){XMLHttpRequest[s]=!1;var t=e.data,n=t.target,o=n[i];h||(h=n[p],v=n[d]),o&&v.apply(n,[y,o]);var a=n[i]=function(){n.readyState===n.DONE&&!t.aborted&&XMLHttpRequest[s]&&e.state===m&&e.invoke()};return h.apply(n,[y,a]),n[r]||(n[r]=e),k.apply(n,t.args),XMLHttpRequest[s]=!0,e}function l(){}function f(e){var t=e.data;return t.aborted=!0,_.apply(t.target,t.args)}var p=w("addEventListener"),d=w("removeEventListener"),h=XMLHttpRequest.prototype[p],v=XMLHttpRequest.prototype[d];if(!h){var g=e.XMLHttpRequestEventTarget;g&&(h=g.prototype[p],v=g.prototype[d])}var y="readystatechange",m="scheduled",b=c(e.XMLHttpRequest.prototype,"open",function(){return function(e,t){return e[o]=0==t[2],e[u]=t[1],b.apply(e,t)}}),k=c(e.XMLHttpRequest.prototype,"send",function(){return function(e,r){var i=t.current;if(e[o])return k.apply(e,r);var a={target:e,url:e[u],isPeriodic:!1,delay:null,args:r,aborted:!1};return i.scheduleMacroTask("XMLHttpRequest.send",l,a,n,f)}}),_=c(e.XMLHttpRequest.prototype,"abort",function(e){return function(e,t){var n=e[r];if(n&&"string"==a(n.type)){if(null==n.cancelFn||n.data&&n.data.aborted)return;n.zone.cancelTask(n)}}})}(e);var r=w("xhrTask"),o=w("xhrSync"),i=w("xhrListener"),s=w("xhrScheduled"),u=w("xhrURL")}),Zone.__load_patch("geolocation",function(t,r,o){t.navigator&&t.navigator.geolocation&&function(t,r){for(var o=t.constructor.name,i=function(i){var a=r[i],s=t[a];if(s){if(!n(Object.getOwnPropertyDescriptor(t,a)))return"continue";t[a]=function(t){var n=function(){return t.apply(this,e(arguments,o+"."+a))};return l(n,t),n}(s)}},a=0;a<r.length;a++)i(a)}(t.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("getUserMedia",function(t,n,r){var o=t.navigator;o&&o.getUserMedia&&(o.getUserMedia=function(t,n){return function(){var r=e(Array.prototype.slice.call(arguments),n||t.name);return t.apply(this,r)}}(o.getUserMedia))}),Zone.__load_patch("PromiseRejectionEvent",function(e,t,n){function r(t){return function(n){d(e,t).forEach(function(r){var o=e.PromiseRejectionEvent;if(o){var i=new o(t,{promise:n.promise,reason:n.rejection});r.invoke(i)}})}}e.PromiseRejectionEvent&&(t[w("unhandledPromiseRejectionHandler")]=r("unhandledrejection"),t[w("rejectionHandledHandler")]=r("rejectionhandled"))})})}).call(t,n(5))},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._disable=n,this.serviceFactory=t}return r(e,[{key:"init",value:function(e){if(this.isEnabled()){var t=this.serviceFactory.getService("ConfigService");t.setConfig({agentName:"js-base",agentVersion:"0.3.0"}),t.setConfig(e),this.serviceFactory.init();this.serviceFactory.getService("ErrorLogging").registerGlobalEventListener();this.serviceFactory.getService("PerformanceMonitoring").init();var n=this.serviceFactory.getService("TransactionService");window.addEventListener("load",function(e){setTimeout(function(){t.get("hasRouterLibrary")||n.sendPageLoadMetrics()})})}return this}},{key:"isEnabled",value:function(){return!this._disable}},{key:"config",value:function(e){this.serviceFactory.getService("ConfigService").setConfig(e)}},{key:"setUserContext",value:function(e){this.serviceFactory.getService("ConfigService").setUserContext(e)}},{key:"setCustomContext",value:function(e){this.serviceFactory.getService("ConfigService").setCustomContext(e)}},{key:"setTag",value:function(e,t){this.serviceFactory.getService("ConfigService").setTag(e,t)}},{key:"setInitialPageLoadName",value:function(e){if(this.isEnabled()){this.serviceFactory.getService("TransactionService").initialPageLoadName=e}}},{key:"captureError",value:function(e){if(this.isEnabled()){return this.serviceFactory.getService("ErrorLogging").logError(e)}}}]),e}();e.exports=o}])})},function(e,t,n){function r(){throw new Error("timeout test error")}n(0).init;var o=n(2)({debug:!0,serverUrl:"http://localhost:8200",serviceName:"apm-agent-js-base-test-e2e-general-usecase",serviceVersion:"0.0.1"});o.setInitialPageLoadName("general-usecase-initial-page-load"),o.setUserContext({usertest:"usertest",id:"userId",username:"username",email:"email"}),o.setCustomContext({testContext:"testContext"}),o.setTag("testTagKey","testTagValue"),setTimeout(function(){r()},100),r.tmp="tmp";var i=document.getElementById("app"),a=document.createElement("h2");a.setAttribute("id","test-element"),a.innerHTML="Passed",i.appendChild(a)},function(e,t,n){var r=n(0).init,o=n(0).apmBase,i=n(3);e.exports=function(e){var t={testConfig:{},serverUrl:"http://localhost:8200"}||{};console.log(t);var n;t.useMocks||(n=o.serviceFactory.getService("ApmServer")),t.serverUrl&&(e.serverUrl=t.serverUrl);var a=new i(n);return o.serviceFactory.registerServiceInstance("ApmServer",a),elasticApm=r(e),elasticApm}},function(e,t,n){var r=n(4);class o{constructor(e){function t(e,t){s[e]?s[e].push(t):s[e]=[t],i.applyAll(this,[t])}function n(e,t){var n=Array.prototype.slice.call(arguments);n.splice(0,2);var r,o=!1;a?r=a[e].apply(a,n):(r=Promise.resolve(),o=!0);return t(e,{args:n,mocked:o}),r}function o(e,n){var r=e[n];return e[n]=function(){var o=Array.prototype.slice.call(arguments);return t(n,{args:o,mocked:!1}),r.apply(e,arguments)}}var i=this.subscription=new r,a=this._apmServer=e,s=this.calls={};this.sendErrors=a?o(a,"sendErrors"):n.bind(a,"sendErrors",t),this.sendTransactions=a?o(a,"sendTransactions"):n.bind(a,"sendTransactions",t),this.addError=n.bind(a,"addError",t),this.addTransaction=n.bind(a,"addTransaction",t)}init(){}}e.exports=o},function(e,t){function n(){this.subscriptions=[]}n.prototype.subscribe=function(e){var t=this;return this.subscriptions.push(e),function(){var n=t.subscriptions.indexOf(e);n>-1&&t.subscriptions.splice(n,1)}},n.prototype.applyAll=function(e,t){this.subscriptions.forEach(function(n){try{n.apply(e,t)}catch(e){console.log(e,e.stack)}},this)},e.exports=n}]);
//# sourceMappingURL=app.e2e-bundle.min.js.map